'From Squeak5.1 of 5 September 2016 [latest update: #16549] on 2 November 2017 at 11:38:56 am'!WAComponent subclass: #DrinklistWebpage	instanceVariableNames: 'user state core'	classVariableNames: ''	poolDictionaries: ''	category: 'Drinklist'!!DrinklistWebpage commentStamp: 'MS 10/24/2017 17:14' prior: 0!Um das ganze auf dem Server zu registrieren, fuehre 	WAAdmin register: DrinklistWebpage asApplicationAt: 'drinky'aus.Instance Variables!!DrinklistWebpage methodsFor: 'communication' stamp: 'MS 11/2/2017 11:33'!identifyUser: userID	"Communicate with other component to retrive user profile"	self state: #choose.	self user: (self core userNamed: userID).			self user ifNil: [		self inform: 'User does not exist'.		self state: #start].! !!DrinklistWebpage methodsFor: 'communication' stamp: 'MS 11/2/2017 11:58'!processDrink: drinkID	self core buy: drinkID by: self user.	self inform: 'Thank you for your purchase of ', drinkID asString , '!!'.! !!DrinklistWebpage methodsFor: 'rendering' stamp: 'MS 11/2/2017 12:22'!initialize	super initialize.		state := #start.	core := DrinklistCore instance.! !!DrinklistWebpage methodsFor: 'rendering' stamp: 'MS 11/2/2017 12:06'!renderContentOn: html	|userID|		html heading: 'Drinky'.		state == #start 		ifTrue: [			html form:[				html textInput					callback: [:value | userID := value.].				html submitButton 					callback: [self identifyUser: userID];					with: 'Login']]		 ifFalse: [			self renderDrinkList: html.			]! !!DrinklistWebpage methodsFor: 'rendering' stamp: 'MS 11/2/2017 11:02'!renderDrinkList: html		html div with:[		self core drinks do: [ :drink |			html div 				class: 'drink';				with: [html anchor					    	callback: [self processDrink: drink];						with: [							html image 								resourceUrl: '/files/DrinklistWebpageFiles/', drink asString, '.png';								altText: drink asString;								width: '100px']]			].		].	html break.	html div 		with: [			html anchor			callback: [self state: #start];			with: 'logout'.].! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 11/1/2017 11:23'!core	^ core! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 11/1/2017 11:23'!core: anObject	core := anObject! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 10:45'!state	^ state! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 10:45'!state: anObject	state := anObject! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 11/2/2017 11:01'!style	^ '	div.drink {		display: flex;		flex-wrap: wrap;		width: 100px;		height: 100px;		float: left;		margin: 0	}	div {		display: inline-block;	}		'! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 09:59'!user	^ user! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 09:59'!user: anObject	user := anObject! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!DrinklistWebpage class	instanceVariableNames: ''!!DrinklistWebpage class methodsFor: 'as yet unclassified' stamp: 'MS 10/26/2017 09:38'!initialize	WAAdmin register: DrinklistWebpage asApplicationAt: 'drinky'! !DrinklistWebpage initialize!