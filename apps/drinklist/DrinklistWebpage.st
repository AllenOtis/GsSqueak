'From Squeak5.1 of 5 September 2016 [latest update: #16549] on 1 November 2017 at 12:31:34 pm'!WAComponent subclass: #DrinklistWebpage	instanceVariableNames: 'user state core'	classVariableNames: ''	poolDictionaries: ''	category: 'Drinklist'!!DrinklistWebpage commentStamp: 'MS 10/24/2017 17:14' prior: 0!Um das ganze auf dem Server zu registrieren, fuehre 	WAAdmin register: DrinklistWebpage asApplicationAt: 'drinky'aus.Instance Variables!!DrinklistWebpage methodsFor: 'communication' stamp: 'MS 11/1/2017 12:17'!identifyUser: userID	"Communicate with other component to retrive user profile"	self state: #choose.	self user: (self core userNamed: userID).			self user ifNil: [		self inform: 'User does not exist'.		self state: #start].! !!DrinklistWebpage methodsFor: 'communication' stamp: 'MS 11/1/2017 12:25'!processDrink: drinkID	| drink |	drink := self core drinkNamed: drinkID.	self core addTransaction: (DrinklistTransaction createFor: user with: drink).	self inform: 'Thank you for your purchase of ', drinkID asString , '!!'.! !!DrinklistWebpage methodsFor: 'rendering' stamp: 'MS 11/1/2017 12:27'!initialize	super initialize.		state := #start.	core ifNil: [		core := DrinklistCore new.].		self flag: #toDo.	"We also have to make sure that only 1 instance of core is active at any time, so this method of initializing is not final!!"			"Initalize with mock objects"	"self core inventory addAll: {#Cola . #BioBrause . #Fanta . #Bier}."	"self halt."	"self core users at: '1' put: (DrinklistUser create: '1')."	! !!DrinklistWebpage methodsFor: 'rendering' stamp: 'MS 10/26/2017 10:49'!renderContentOn: html	|userID|		html heading: 'Drinky'.		state == #start 		ifTrue: [			html form:[				html numberInput					callback: [:value | userID := value.].				html submitButton 					callback: [self identifyUser: userID];					with: 'test'.	]]		 ifFalse: [			self renderDrinkList: html.			]! !!DrinklistWebpage methodsFor: 'rendering' stamp: 'MS 11/1/2017 12:24'!renderDrinkList: html		self core drinks do: [ :drink |		html div 			class: 'drink';			with: [html anchor				    	callback: [self processDrink: drink];					with: [						html image 							resourceUrl: '/files/DrinklistWebpageFiles/', drink asString, '.png';							altText: drink asString;							width: '100px']]	]! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 11/1/2017 11:23'!core	^ core! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 11/1/2017 11:23'!core: anObject	core := anObject! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 10:45'!state	^ state! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 10:45'!state: anObject	state := anObject! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 11:02'!style	^ '	div.drink {		display: flex;		flex-wrap: wrap;		width: 100px;		height: 100px;		float: left;		margin: 0	}	'! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 09:59'!user	^ user! !!DrinklistWebpage methodsFor: 'accessing' stamp: 'MS 10/26/2017 09:59'!user: anObject	user := anObject! !"-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- "!DrinklistWebpage class	instanceVariableNames: ''!!DrinklistWebpage class methodsFor: 'as yet unclassified' stamp: 'MS 10/26/2017 09:38'!initialize	WAAdmin register: DrinklistWebpage asApplicationAt: 'drinky'! !DrinklistWebpage initialize!